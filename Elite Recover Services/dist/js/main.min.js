(function () {
  const docEl = document.documentElement; // For accessing <html> element
  const body = document.body;

  // Switch from no-js to js
  docEl.classList.remove("no-js");
  docEl.classList.add("js");

  // Only apply if animations are enabled
  if (body.classList.contains("has-animations")) {
    const sr = ScrollReveal();

    // Section Reveals Settings
    const revealSettings = {
      duration: 800,
      distance: '40px',
      easing: 'ease-out',
      origin: 'bottom',
      interval: 150
    };

    // Reveal content in Arabic
    function revealArabicContent() {
      sr.reveal('.lang.ar .vision-mission-image', { ...revealSettings, origin: 'left' });
      sr.reveal('.lang.ar .vision-mission-content', { ...revealSettings, origin: 'right', delay: 150 });
      // Add more Arabic-specific reveals here if needed
    }

    // Reveal content in English
    function revealEnglishContent() {
      sr.reveal('.lang.en .vision-mission-image', { ...revealSettings, origin: 'left' });
      sr.reveal('.lang.en .vision-mission-content', { ...revealSettings, origin: 'right', delay: 150 });
      // Add more English-specific reveals here if needed
    }

    // Initial animation on page load
    anime({
      targets: '.site-header',
      translateY: [-50, 0],
      opacity: [0, 1],
      duration: 1200,
      easing: 'easeOutExpo',
      delay: 200
    });

    // Hero Section Reveal
    sr.reveal('.hero-inner', {
      origin: 'bottom',
      distance: '60px',
      duration: 1000,
      delay: 300,
      easing: 'ease-out'
    });

    anime.timeline({ easing: 'easeOutExpo' })
      .add({
        targets: '.hero-title',
        translateY: [40, 0],
        opacity: [0, 1],
        duration: 800,
        delay: 500
      })
      .add({
        targets: '.hero-paragraph',
        translateY: [20, 0],
        opacity: [0, 1],
        duration: 800,
        offset: '-=400'
      })
      .add({
        targets: '.hero-cta .button',
        scale: [0.9, 1],
        opacity: [0, 1],
        duration: 600,
        delay: anime.stagger(200),
      });

    anime({
      targets: '.hero-figure',
      scale: [0.8, 1],
      opacity: [0, 1],
      duration: 1200,
      easing: 'easeOutElastic(1, .8)',
      delay: 800
    });

    // About Us Section
    sr.reveal('.section-about-us .about-us-image', { ...revealSettings, origin: 'left' });
    sr.reveal('.section-about-us .about-us-content', { ...revealSettings, origin: 'right', delay: 150 });

    // Goals Section
    sr.reveal('.elite-hero-image', { ...revealSettings, origin: 'left' });
    sr.reveal('.goals-overview .goal-point', revealSettings);

    // Services Section
    sr.reveal('.elite-services-image', { ...revealSettings, origin: 'left' });
    sr.reveal('.elite-services-content .service-card', revealSettings);

    // Founders Section
    sr.reveal('.section-founders .founder-block', revealSettings);

    // Logos Section
    sr.reveal('.section-logos .logo-img', {
      scale: 0.9,
      opacity: 0,
      duration: 800,
      interval: 100,
      easing: 'ease-out'
    });

    // Contact Section
    sr.reveal('.contact-left', { ...revealSettings, origin: 'left' });
    sr.reveal('.contact-right', { ...revealSettings, origin: 'right', delay: 150 });

    // Call To Action Section
    sr.reveal('.cta-inner', { ...revealSettings, origin: 'bottom' });

    // Button Pulse Animation
    anime({
      targets: '.hero-cta .button',
      backgroundColor: ['#0270D7', '#005bb5'],
      duration: 2000,
      easing: 'easeInOutSine',
      direction: 'alternate',
      loop: true,
      delay: 2500
    });

    // Vision and Mission Section Animations
    sr.reveal('.vision-mission-image', {
      origin: 'left',
      distance: '60px',
      duration: 800,
      delay: 300,
      easing: 'ease-out',
    });
    sr.reveal('.vision-mission-content', {
      origin: 'right',
      distance: '60px',
      duration: 800,
      delay: 500,
      easing: 'ease-out',
    });

    // Button Pulse Animation
    anime({
      targets: '.hero-cta .button',
      backgroundColor: ['#0270D7', '#005bb5'],
      duration: 2000,
      easing: 'easeInOutSine',
      direction: 'alternate',
      loop: true,
      delay: 2500
    });

    // Mark as ready
    docEl.classList.add("anime-ready");
  }
})();
